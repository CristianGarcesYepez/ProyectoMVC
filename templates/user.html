<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Usuarios</title> <!-- Vincula el archivo CSS externo -->
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/userstyle.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  </head>
  <body>
    <nav>
      <h1>Lista de Usuarios</h1>
      <!-- Menú lateral -->
      <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="{{ url_for('home_page') }}" method="GET">Menú Principal</a><!-- Agrega un enlace al menú principal -->
        <ul><a href="#">Generar</a>
           <li><a href="#">PDF</a></li>
           <li><a href="#">Excel</a></li>
           <li><a href="#">CSV</a></li> 
        </ul>
        <a href="{{ url_for('login_page') }}" method="GET" class="exit">Cerrar Sesión</a>
      </div>
      <div class="content">
        <!-- Botón hamburguesa -->
        <span class="hamburger" onclick="toggleNav()">&#9776;</span>
      </div>
      <script>
        function toggleNav() {
            var sidenav = document.getElementById("mySidenav");
            var hamburger = document.querySelector(".hamburger");

            // Si el menú está cerrado, lo abre
            if (sidenav.style.width === "0px" || sidenav.style.width === "") {
                sidenav.style.width = "250px";
                hamburger.classList.add("open-sidenav");
            } else {
                // Si el menú está abierto, lo cierra
                sidenav.style.width = "0";
                hamburger.classList.remove("open-sidenav");
            }
        }
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.querySelector(".hamburger").classList.remove("open-sidenav");
        }
      </script>
    </nav>
      <form>
        <table>
          <thead>
            <tr>
              <th>Id</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Correo</th>
              <th>Nombre de Usuario</th>
              <th>Contraseña</th>
              <th>Rol</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            {% for usuario in usuarios %}
              <tr>
                <td>{{ usuario.id }}</td>
                <td>{{ usuario.nombre }}</td>
                <td>{{ usuario.apellido }}</td>
                <td>{{ usuario.correo }}</td>
                <td>{{ usuario.nombre_usuario }}</td>
                <td>{{ usuario.clave_usuario }}</td>
                <td>{{ usuario.rol }}</td>
                <td>{% if usuario.estado == 1 %}
                          Activo
                    {% else %}
                          Inactivo
                    {% endif %}
                </td>
                <td class="action-icons">
                  <a href="{{ url_for('update_user', user_id=usuario['id']) }}" class="btn-edit" title="Editar">
                    <i class="fas fa-edit edit"></i>
                  </a>
                  <a href="{{ url_for('eliminar_usuario', user_id=usuario['id']) }}" class="btn-delete" title="Eliminar">               
                    <i class="fas fa-trash delete"></i>
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </form>
    </div>
    <div>
      <a href="{{url_for('register_page')}}" method="GET"><button class="agg-user">Agregar Usuario</button></a>
    </div>
  </body>
</html>
